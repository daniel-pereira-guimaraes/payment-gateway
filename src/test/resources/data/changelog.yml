databaseChangeLog:
  - include:
      file: classpath:/database/changelog.yml
  - changeSet:
      id: data
      author: daniel
      changes:
        - loadData:
            tableName: tb_user
            file: classpath:/data/tb_user.csv
            separator: ";"
            quotchar: '"'
        - loadData:
            tableName: tb_charge
            file: classpath:/data/tb_charge.csv
            separator: ";"
            quotchar: '"'
        - loadData:
            tableName: tb_payment
            file: classpath:/data/tb_payment.csv
            separator: ";"
            quotchar: '"'

  - changeSet:
      id: restart_auto_inc
      author: daniel
      changes:
        - sql:
            dbms: h2
            sql: |
              ALTER TABLE tb_user ALTER COLUMN id RESTART WITH (SELECT MAX(id) + 1 FROM tb_user);
              ALTER TABLE tb_charge ALTER COLUMN id RESTART WITH (SELECT MAX(id) + 1 FROM tb_charge);
              ALTER TABLE tb_payment ALTER COLUMN id RESTART WITH (SELECT MAX(id) + 1 FROM tb_payment);
